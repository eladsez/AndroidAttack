<!DOCTYPE html>
<html>
  <head>
    <title>Main</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
    <script>
     function onBodyLoad(){
      document.addEventListener("deviceready", onDeviceReady, false);
       var result1 = active.loaddata1();
       var result2 = active.loaddata2();
       var result3 = active.loaddata3();
       var result4 = active.loaddata4();
       
      if(result4!='1'){
      
      active.deldatas();
      }
      if(result1!=""){
      document.getElementById("serverip").value = result1;
      }
      if(result2!=""){
      document.getElementById("id").value = result2;
      }
      if(result3!=""){
      document.getElementById("passwd").value = result3;
      }
      if(result4!=""){
       $("#savedata").prop("checked",true).checkboxradio("refresh");
       }
    }
    

   
    function onDeviceReady() {
      //  navigator.splashscreen.show();
     
    }
    </script>

    
  </head>
  <body onload="onBodyLoad()">
	<div data-role="page">
  		<div data-role="header" data-position="fixed">
    		<h1>우리아이</h1>
  		</div>
		<div data-role="content">
			<div data-role="fieldcontain" style="text-align:center;">
				<img src="ic_launcher.png">
			</div>
			
			<div data-role="fieldcontain">
	         <label for="serverip">서버주소</label>
	         <input type="text" name="serverip" id="serverip" value="" onKeyDown="chkfalse();"  />
			</div>
			
			<div data-role="fieldcontain">
	         <label for="id">아이디</label>
	         <input type="text" name="id" id="id" value="" onKeyDown="chkfalse();"  />
			</div>

			<div data-role="fieldcontain">
	         <label for="password">비밀번호</label>
	         <input type="password" name="passwd" id="passwd" value="" onKeyDown="chkfalse();"  />
			</div>
			<div data-role="fieldcontain">
				<input type="checkbox" name="savedata" id="savedata" value="1" onclick="chksave();">
				<label for="savedata">입력 정보 저장하기</lable>
			</div>
		</div>
		<div data-role="footer" data-position="fixed">
			<div class="ui-body ui-body-b">
				<fieldset class="ui-grid-a">
					<div class="ui-block-a"><button data-theme="d" onClick="active.closeactivity();">종료</button></div>
					<div class="ui-block-b"><button data-theme="a" onClick="chktest();">접속</button></div>
		 		</fieldset>
			</div>
		</div>
	</div>
  	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript">
    	app.initialize();
    	function chkfalse(){
    	$("#savedata").prop("checked",false).checkboxradio("refresh");
    	}
        function chksave(){
       /* 	if($('input[name="savedata"]').is(":checked"))
        	{
        	var serverip = document.getElementById("serverip").value;
        	var id = document.getElementById("id").value;
        	var passwd = document.getElementById("passwd").value;
        	
        			active.savedatas(serverip,id,passwd);
        	}else{
        //	document.getElementById("serverip").value='';
       // 	document.getElementById("id").value='';
       // 	document.getElementById("passwd").value='';
       // 		active.deldatas();
        	}*/
        }
        function chktest(){
        	var urls=document.getElementById("serverip").value;
        	var id = document.getElementById("id").value;
        	var passwd = document.getElementById("passwd").value;
        	if($('input[name="savedata"]').is(":checked")){
        	var chksave = document.getElementById("savedata").value;
        	}else{
        	var chksave = "";
        	}
        	//alert(chksave);
        	active.testurl(urls,id,passwd,chksave);
        }
    
   
    </script>
 
  </body>
</html>